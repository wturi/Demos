<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body></body>
</html>
<script src="jquery-2.1.4.js"></script>
<script type="text/javascript">
	
	/*function cat(name,color){
		this.name=name;
		this.color=color;
	}
	cat.prototype.type='猫科动物';
	cat.prototype.eat=function(){
		alert('吃老鼠');
	}


	var cat1=new cat('大毛','黄色');
*/
	//alert(cat1.color+'的'+cat1.name+'是'+cat1.type);

	//cat1.eat();

	/*Number.prototype = Object.defineProperty(
	  Number.prototype, "double", {
	    get: function (){return (this + this)} 
	  }
	);

	Number.prototype =  Object.defineProperty(
	  Number.prototype, "square", {
	    get: function (){return (this * this)} 
	  }
	);

	alert((8).double.square);*/


	

	/*var wait = function(){

		var dtd=$.Deferred();

　　　　var tasks = function(){

　　　　　　alert("执行完毕！");

　　　　　　dtd.resolve(); // 改变Deferred对象的执行状态

　　　　};

　　　　setTimeout(tasks,1000);

　　　　return dtd.promise();
　　};

	var d=wait();

	$.when(d).done(function(){
		alert("哈哈，成功了！");
	}).fail(function(){
		alert("出错啦！");
	})*/
	
	
	/*function f1(){

　　　　var dfd = $.Deferred();

　　　　setTimeout(function () {

　　　　　　// f1的任务代码

　　　　　　dfd.resolve();

　　　　}, 500);

　　　　return dfd.promise;

　　}

	function f2(){
		alert("哈哈，成功了！");
	}

	function f3(){
		alert("f3");
	}

	//$.when(f1()).done(f2).done(f3);

	$.ajax(f3()).then(f2).done(f3);	*/

	/*var pubsub = {};
	(function (q) {

	    var topics = {}, // 回调函数存放的数组
	        subUid = -1;
	    // 发布方法
	    q.publish = function (topic, args) {

	        if (!topics[topic]) {
	            return false;
	        }

	        setTimeout(function () {
	            var subscribers = topics[topic],
	                len = subscribers ? subscribers.length : 0;

	            while (len--) {
	                subscribers[len].func(topic, args);
	            }
	        }, 0);

	        return true;

	    };
	    //订阅方法
	    q.subscribe = function (topic, func) {

	        if (!topics[topic]) {
	            topics[topic] = [];
	        }

	        var token = (++subUid).toString();
	        topics[topic].push({
	            token: token,
	            func: func
	        });
	        return token;
	    };
	    //退订方法
	    q.unsubscribe = function (token) {
	        for (var m in topics) {
	            if (topics[m]) {
	                for (var i = 0, j = topics[m].length; i < j; i++) {
	                    if (topics[m][i].token === token) {
	                        topics[m].splice(i, 1);
	                        return token;
	                    }
	                }
	            }
	        }
	        return false;
	    };
	} (pubsub));

	//使用方式如下：

	//来，订阅一个
	var testSubscription= pubsub.subscribe('example1', function (topics, data) {
	    console.log(topics + ": " + data);
	});

	

	//发布通知
	pubsub.publish('example1', 'hello world!');
	pubsub.publish('example1', ['test', 'a', 'b', 'c']);
	pubsub.publish('example1', [{ 'color': 'blue' }, { 'text': 'hello'}]);*/

	/*function Observer() {
    this.fns = [];
	}
	Observer.prototype = {
	    subscribe: function (fn) {
	        this.fns.push(fn);
	    },
	    unsubscribe: function (fn) {
	        this.fns = this.fns.filter(
	                        function (el) {
	                            if (el !== fn) {
	                                return el;
	                            }
	                        }
	                    );
	    },
	    update: function (o, thisObj) {
	        var scope = thisObj || window;
	        this.fns.forEach(
	                        function (el) {
	                            el.call(scope, o);
	                        }
	                    );
	    }
	};

	//测试
	var o = new Observer;
	var f1 = function (data) {
	    console.log('Robbin: ' + data + ', 赶紧干活了！');
	};

	var f2 = function (data) {
	    console.log('Randall: ' + data + ', 找他加点工资去！');
	};

	o.subscribe(f1);
	o.subscribe(f2);

	o.update("Tom回来了！")*/


/*	(function ($){

		 var o=$({});

		 $.subscribe=function(){
		 	o.on.apply(o, arguments);
		 };

		 $.unsubscribe=function(){
		 	o.off.apply(o, arguments);
		 }

		 $.publish=function(){
		 	o.trigger.apply(o, arguments);
		 };
	}(jQuery));

	function handle(e,str){
		console.log(str+'handle');
	}

	function handle1(e,str){
		console.log(str+'handle1');
	}


	$.subscribe('s1',handle);
	$.subscribe('s1',handle1);*/


	function f1(callback){
		setTimeout(function(){
			alert(1);
			callback();
		},1000);
	}

	function f2(){
		alert(2);
	}

	f1(f2);
	
</script>